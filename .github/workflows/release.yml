name: ğŸš€ Create Release

# è§¦å‘å™¨ï¼šå½“ä¸€ä¸ª 'v*' æ ¼å¼çš„æ ‡ç­¾è¢«æ¨é€æ—¶ï¼Œæˆ–æ‰‹åŠ¨è§¦å‘æ—¶è¿è¡Œ
on:
  push:
    tags:
      - 'v*' # åŒ¹é… v1.0, v2.3.4 ç­‰æ ‡ç­¾

  workflow_dispatch:
    inputs:
      tag:
        description: 'Release tag to create (e.g., v202509161845)'
        required: true
        default: 'v202509161845'
      target_branch:
        description: 'Target branch to base the tag on'
        required: true
        default: 'release'
      prerelease:
        description: 'Mark as pre-release version'
        required: true
        default: false
        type: boolean

jobs:
  create-release:
    name: ğŸ“¦ Call Release Creator

    # å°†æƒé™è®¾ç½®ç§»åˆ° Job å†…éƒ¨
    permissions:
      contents: write # 'contents: write' æƒé™æ˜¯åˆ›å»º Release æ‰€å¿…éœ€çš„

    # è°ƒç”¨ reusable-release.yml å·¥ä½œæµ
    uses: Kevin-mpy/cicd/.github/workflows/reusable-release.yml@main
    with:
      # ä¼ å‚
      tag: ${{ github.event.inputs.tag || github.ref_name }}
      target_branch: ${{ github.event.inputs.target_branch }}
      prerelease: ${{ github.event.inputs.prerelease }}
    secrets: inherit
